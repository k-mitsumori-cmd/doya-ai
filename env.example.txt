# ===========================================
# DOYA-AI 環境変数設定
# ===========================================
# このファイルを .env.local にリネームして値を設定してください

# ===========================================
# 認証設定 (NextAuth.js)
# ===========================================
# NEXTAUTH_URL: アプリケーションのURL
# ローカル開発時: http://localhost:3000
# 本番環境: https://your-domain.vercel.app
NEXTAUTH_URL=http://localhost:3000

# NEXTAUTH_SECRET: セッション暗号化用のシークレットキー
# 生成方法: openssl rand -base64 32
NEXTAUTH_SECRET=your-super-secret-key-here

# ===========================================
# Google OAuth設定
# ===========================================
# Google Cloud Console (https://console.cloud.google.com/) で取得
# 1. 新しいプロジェクトを作成
# 2. 「APIとサービス」→「認証情報」
# 3. 「OAuth 2.0 クライアント ID」を作成
# 4. 承認済みのリダイレクト URI に以下を追加:
#    - http://localhost:3000/api/auth/callback/google (開発)
#    - https://your-domain.vercel.app/api/auth/callback/google (本番)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ===========================================
# データベース設定 (PostgreSQL)
# ===========================================
# Supabase, PlanetScale, Neon, Vercel Postgres など
# フォーマット: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL=postgresql://user:password@localhost:5432/doya_ai?schema=public

# ===========================================
# OpenAI API設定
# ===========================================
# OpenAI Platform (https://platform.openai.com/) で取得
OPENAI_API_KEY=sk-your-openai-api-key

# ===========================================
# Google AI Studio 設定 (バナー画像生成)
# ===========================================
# 
# 参考: https://ai.google.dev/gemini-api/docs/image-generation?hl=ja
#
# 【設定手順】
# 1. Google AI Studio (https://aistudio.google.com/) にアクセス
# 2. 「Get API key」をクリック
# 3. 「Create API key」でキーを作成
# 4. 生成されたAPIキーをコピー
#
# 【使用モデル】
# - Nano Banana Pro (gemini-2.0-flash-exp)
# - テキストと画像の両方を出力可能
# - 高品質な画像生成

# Google AI Studio APIキー
GOOGLE_GENAI_API_KEY=your-google-ai-studio-api-key

# ===========================================
# SlashSlide（スラッシュスライド）: Google Slides 直接出力
# ===========================================
# 既存サービスに影響を出さないため、SlashSlideは「サービスアカウント」で
# Google Slides/Drive API を叩き、生成したスライドを指定メールへ共有します。
#
# 【設定手順（概要）】
# 1) Google Cloud Console でサービスアカウント作成
# 2) そのサービスアカウントで「Google Slides API」「Google Drive API」を有効化
# 3) サービスアカウントのJSON鍵を発行し、以下へ設定
#
# サービスアカウントのクライアントメール（例: xxx@yyy.iam.gserviceaccount.com）
SLASHSLIDE_GOOGLE_SERVICE_ACCOUNT_EMAIL=
# サービスアカウントの秘密鍵（JSONの private_key をそのまま貼る。改行は \n 形式でもOK）
SLASHSLIDE_GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY=
#
# （任意）SlashSlide専用のGeminiモデル（未設定なら gemini-3-pro-preview）
SLASHSLIDE_GEMINI_MODEL=
#
# （任意）別ドメインでSlashSlideを公開する場合のHost（カンマ区切り）
# 例: SLASHSLIDE_HOSTS=slashslide.example.com,slashslide.vercel.app
SLASHSLIDE_HOSTS=

# ===========================================
# Stripe設定 (課金システム)
# ===========================================
# Stripe Dashboard (https://dashboard.stripe.com/) で取得
# テスト環境では pk_test_ / sk_test_ で始まるキーを使用
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key

# Stripe Webhookシークレット
# ローカル: stripe listen --forward-to localhost:3000/api/stripe/webhook で表示されるシークレット
# 本番: Stripe DashboardのWebhook設定から取得
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret

# Stripe Customer Portal 設定ID（任意）
# これを設定すると、契約管理（カスタマーポータル）で「プラン変更/解約」などの機能を確実に有効化できます。
# Stripe Dashboard → 設定 → Billing → Customer portal で作成した Configuration ID（bpc_...）
STRIPE_PORTAL_CONFIGURATION_ID=bpc_xxx

# （任意）ドヤバナーAIのStripe Product ID（prod_...）
# Customer Portal の「プラン変更候補」をドヤバナーAIの商品のみに絞りたい場合に設定します。
# 未設定でも動作します（価格IDから候補を作るため）が、他商品の候補が混ざるのを避けたい場合に推奨です。
STRIPE_PRODUCT_BANNER_ID=prod_xxx

# ===========================================
# Stripe価格ID設定
# ===========================================
# Stripe Dashboard → Products で各プランを作成し、価格IDを取得
# 各サービス × プラン × 月払い/年払い で設定

# カンタンドヤAI
STRIPE_PRICE_KANTAN_STARTER_MONTHLY=price_xxx
STRIPE_PRICE_KANTAN_STARTER_YEARLY=price_xxx
STRIPE_PRICE_KANTAN_PRO_MONTHLY=price_xxx
STRIPE_PRICE_KANTAN_PRO_YEARLY=price_xxx

# ドヤSEO
STRIPE_PRICE_SEO_PRO_MONTHLY=price_xxx
STRIPE_PRICE_SEO_PRO_YEARLY=price_xxx
STRIPE_PRICE_SEO_BUSINESS_MONTHLY=price_xxx
STRIPE_PRICE_SEO_BUSINESS_YEARLY=price_xxx

# ドヤバナーAI
STRIPE_PRICE_BANNER_STARTER_MONTHLY=price_xxx
STRIPE_PRICE_BANNER_STARTER_YEARLY=price_xxx
STRIPE_PRICE_BANNER_PRO_MONTHLY=price_xxx
STRIPE_PRICE_BANNER_PRO_YEARLY=price_xxx
STRIPE_PRICE_BANNER_BUSINESS_MONTHLY=price_xxx
STRIPE_PRICE_BANNER_BUSINESS_YEARLY=price_xxx
STRIPE_PRICE_BANNER_ENTERPRISE_MONTHLY=price_xxx
STRIPE_PRICE_BANNER_ENTERPRISE_YEARLY=price_xxx

# セットプラン（オールインワン）
STRIPE_PRICE_BUNDLE_MONTHLY=price_xxx
STRIPE_PRICE_BUNDLE_YEARLY=price_xxx

# ===========================================
# ドヤスライド設定（スライド自動生成サービス）
# ===========================================
#
# 【概要】
# ドヤスライド は Gemini API でスライド構成を自動生成し、
# サービスアカウント経由で Google Slides に書き出して
# 指定したメールアドレスに編集権限を付与するサービスです。
# アクセス先: /slide
#
# 【Gemini 設定（任意）】
# 既存の GOOGLE_GENAI_API_KEY を流用します。
# 別途モデルを指定したい場合のみ設定。
SLIDE_GEMINI_MODEL=gemini-3-pro-preview

# 【Google サービスアカウント設定（必須）】
#
# 設定手順:
# 1. Google Cloud Console (https://console.cloud.google.com/) で新規プロジェクトを作成、
#    もしくは既存プロジェクトを選択。
# 2. 「APIとサービス」→「ライブラリ」で
#    - Google Slides API を有効化
#    - Google Drive API を有効化
# 3. 「IAMと管理」→「サービスアカウント」→「サービスアカウントを作成」
#    - 名前例: doya-slide-generator
#    - ロール: 特に不要（権限はスライド作成時に Drive 権限で付与）
# 4. 作成したアカウントの「キー」→「新しいキーを追加」→「JSON」
# 5. ダウンロードしたJSONから以下2つを抽出:
#    - client_email → SLIDE_GOOGLE_SERVICE_ACCOUNT_EMAIL
#    - private_key  → SLIDE_GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY
#      ※ private_key は改行を \n で保持したまま貼り付け（1行にする）

SLIDE_GOOGLE_SERVICE_ACCOUNT_EMAIL=slide@your-project.iam.gserviceaccount.com
SLIDE_GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvQ...(長い文字列)...\n-----END PRIVATE KEY-----\n"

# 【ドメイン別公開設定（任意）】
# ドヤスライド を別ドメイン (slide.example.com) で公開したい場合のみ設定。
# カンマ区切りで複数指定可能。
# 未設定の場合は https://your-domain/slide でアクセス。
# SLIDE_HOSTS=slide.example.com
